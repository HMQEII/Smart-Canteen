<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Cart 2 Door</title>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
        <link rel="stylesheet" href="popup.css">
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous"> -->
        <link rel="stylesheet" href="HomeStyle.css"> 
        <link rel="icon" type="image/x-icon" href="public/Double-Cheese-Burger-Royalty-Free-Animated-Icon-GIF-350px-2.gif">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" >
    </head>
    <body>
        <div id="popup" class="popup">
            <div class="popup-content">
                <!-- <span class="close-popup" onclick="closePopup()">&times;</span> -->
                <p id="popup-message"></p>
                <button class="okay-button" onclick="closePopup()">Okay</button>
            </div>
        </div>
        <style>
            .ionicons{
                font-size: 28px;
                margin-bottom: 0 !important;
            }
            .subionicons{
                margin-right: 10px;
            }
            .usericon{
                padding-right: 10px !important;
            }
            #addstore{
                font-size: 11.5vw;
                color: black;
                transition: .2s;
            }
            #addstore:hover{
                color: darkcyan;
                transition: .2s;
            }
        </style>
        <header>
            <div class="logo">
                <a href="Home.html">
                  <img src="public/Double-Cheese-Burger-Royalty-Free-Animated-Icon-GIF-350px-2.gif" width= '77px' height='67px 'alt="SHLocal">
                </a>
            </div>
            <nav class="navigation">
                <div class="search-cont">
                    <span class="search-icon"><i class="fas fa-search"></i></span>
                  <input type="search" id="search-box"  class="search-box">
                </div>
                <a href="">About</a>
                <a href="" class="s_one">Option 2</a>
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false">
                        <ion-icon name="person-circle-outline" class="usericon"></ion-icon>
                        <label id="userid">Admin</label>
                    </button>
                    <ul class="dropdown-menu">
                      <li><a class="dropdown-item" href="#"><ion-icon class="subionicons" name="person"></ion-icon>Profile</a></li>
                      <li><a class="dropdown-item" href="#"><ion-icon name="bag-check-outline" class="subionicons"></ion-icon>Checkout</a></li>
                      <li><a class="dropdown-item" href="#"><ion-icon name="gift-outline" class="subionicons"></ion-icon>Orders</a></li>
                      <li><a class="dropdown-item" href="#"><ion-icon name="wallet-outline" class="subionicons"></ion-icon>Wallet</a></li>
                      <li><a class="dropdown-item" href="login.html"><ion-icon class="subionicons" name="power"></ion-icon>Log Out</a></li>
                    </ul>
                  </div>
            </nav>
        </header>
        
        <br><br><br>
        <div class="banner"><br>
            <center>Most Searched</center><br>
            <iframe src="quickaccess.html" class="qaframe"></iframe>
        </div>
        <script src="homescript.js"></script>
        <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
<br><br><br>
       
       <div  class="section">
          <h2>Recommendations for You</h2><br>
          <center>
          <div class="try">
            <div class="card" id="dmart" onclick="addToSelectedListAndShowIframe('c1', 'Dmart')">
                <img src="public/healthy.gif" class="card_img" alt="..." >
                <div class="card-body">
                  <p class="card-text"  ><center>Dmart</center></p>
                </div>
            </div>
            <div class="card" onclick="addToSelectedListAndShowIframe('c2', 'Apolo Pharmacy')">
                <img src="https://drive.google.com/uc?id=1q8oCJ0vkPnAfRbIdzFdTAu4SBMyW5je_" class="card_img" alt="..." >
                <div class="card-body">
                  <p class="card-text" ><center>Apolo Pharmacy</center></p>
                </div>
            </div>
            <div class="card" onclick="addToSelectedListAndShowIframe('c3','Adarsh Supermarket')"> 
                <img src="https://drive.google.com/uc?id=1x_GHb7ksQ-EpfkfhtcwArJ4hVRL6KB6h" class="card_img" alt="..." >
                <div class="card-body">
                  <p class="card-text" ><center>Adarsh Supermarket</center></p>
                </div>
            </div>
            <div class="card" onclick="addToSelectedListAndShowIframe('c4','Govind Store')">
                <img src="https://drive.google.com/uc?id=1Pd0vH-wZYLpd5Kwv-zF8QRlL8N29rKv4" class="card_img" alt="..." >
                <div class="card-body">
                  <p class="card-text" ><center>Govind Store</center></p>
                </div>
            </div>
            <div class="card" onclick="addToSelectedListAndShowIframe('c5', 'Mamta Novelty')">
                <img src="https://drive.google.com/uc?id=1cjLAulnwqArbJMQ_YitHodamqUoiPrd1" class="card_img" alt="..." >
                <div class="card-body">
                  <p class="card-text" ><center>Mamta Novelty</center></p>
                </div>
            </div>
            <div class="card" onclick="addToSelectedListAndShowIframe('c6','Low Price')">
                <img src="https://drive.google.com/uc?id=1WVvAoLEGXQvPX207YYvGWXa0kef3spz8" class="card_img" alt="..." >
                <div class="card-body">
                  <p class="card-text" ><center>Low Price</center></p>
                </div>
            </div>
        </center>
        </div>
       </div>
       <div id="about" class="section">
        <h2 id="cardTitle"></h2>
        <div class="iframe-container" style="max-height: 58vh;">
            <iframe id="c1Iframe" class="hidden-iframe" src="c1.html"></iframe>
            <iframe id="c2Iframe" class="hidden-iframe" src="c2.html"></iframe>
            <iframe id="c3Iframe" class="hidden-iframe" src="c3.html"></iframe>
            <iframe id="c4Iframe" class="hidden-iframe" src="c4.html"></iframe>
            <iframe id="c5Iframe" class="hidden-iframe" src="c5.html"></iframe>
            <iframe id="c6Iframe" class="hidden-iframe" src="c6.html"></iframe>
        </div>             
     </div>
        <div class="section">
            <center>
                <div class="total col-lg-6 col-md-6 col-12">
                    <div class="mb-1">
                    <h2 id="selected-label">Your Selection</h2><br>
                    <div class="d-flex justify-content-between">
                        <h5>Shop</h5>
                        <label id="selecshop">#</label>
                    </div>
                    <div class="d-flex justify-content-between">
                        <h5>Items</h5>
                        <label id="selecitem">#</label>
                    </div>
                    <hr class="second-hr">
                    <button class="ml-auto"onclick="redirectToCheckout()">PROCEED TO CHECKOUT</button>
                    <button class="ml-auto" onclick="addtocart()">ADD TO CART</button>
                    <button class="ml-auto" onclick="clearSelectedThings()">CLEAR</button>
                    <br>
                    </div>
                </div> 
            </center>
            <script>
                function openPopup(message) {
                    const popup = document.getElementById("popup");
                    const popupMessage = document.getElementById("popup-message");
                    popupMessage.textContent = message;
                    popup.style.display = "block";
                }
                
                // Function to close the popup
                function closePopup() {
                    const popup = document.getElementById("popup");
                    popup.style.display = "none";
                }
                // Function to get the selected shop and items and redirect to checkout.html
                function redirectToCheckout() {
                    // Get the latest value of selecshop and selecitem
                    const shopName = document.getElementById('selecshop').textContent;
                    const itemName = document.getElementById('selecitem').textContent;
                    const Image = selectedImage;
                    const price = itemPrice;
                    // alert(price);
                    // Store the details in local storage
                    localStorage.setItem('localVariableDetails', JSON.stringify({ shopName, itemName, Image, price }));
                    // alert(JSON.stringify(Image));

                    // Redirect to checkout.html
                    window.location.href = 'checkout.html';
                }
                function addtocart() {
                    const userid = localStorage.getItem("username");
                    const shopName = document.getElementById('selecshop').textContent;
                    const itemName = document.getElementById('selecitem').textContent;
                    const Image = selectedImage;
                    const price = itemPrice;
                    alert(userid);
                    // alert(price);
                    // Store the details in local storage
                    // localStorage.setItem('localVariableDetails', JSON.stringify({ shopName, itemName, Image, price }));
                    const itemToAdd = {
                        userid,
                        shopName,
                        itemName,
                        Image,
                        price,
                    };

                    // Send a POST request to the server to add the item to the cart
                    fetch('/addtocart', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify(itemToAdd),
                    })
                    .then((response) => response.json())
                    .then((data) => {
                        if (data.success) {
                            openPopup("Item added to the cart.");
                        } else {
                            openPopup("Failed to add item to the cart.");
                        }
                    })
                    .catch((error) => {
                        console.error(error);
                        openPopup("Failed to add item to the cart.");
                    });
                }
            </script>
            <style>
                .d-flex label{
                    color:black !important;
                }
                .ml-auto{
                    background-color: transparent;
                    border:2px solid black;
                    margin-right: 10px;
                    padding: 5px;
                    border-radius: 10px;
                    border:none;
                    transition: .2s;
                    color: black;
                }
                .ml-auto a{
                    color: black;
                    text-decoration: none;
                }
                .ml-auto:hover{
                    transform: scale(1.05);
                    color: darkcyan;
                    transition: .2s;
                    border:none;
                }
            </style>
        </div>
     
       <footer class="footer">
        <div class="navigation-foot">
            
            <div class="row">
                <div class="footer-col">
                    <h4>Get Help</h4>
                    <ul class="ul1">
                        <li><a href='#'>FAQ</a></li>
                        <li><a href='#'>Shipping</a></li>
                        <li><a href='#'>Returns</a></li>
                        <li><a href='#'>Payment Options</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Company</h4>
                    <ul class="ul1">
                        
                        <li><a href='#'>Privacy Policy</a></li>
                        <li><a href='#'>Affilliate Program</a></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Contact Us</h4>
                    <ul class="ul1">
                        <li><a href="mailto:cart2door@gmail.com">support@c2d.com</a></li>
                        <li><p>9169420569</p></li>
                    </ul>
                </div>
                <div class="footer-col">
                    <h4>Follow Us</h4>
                    <div class="social-media-links">
                        <a href='#'><i class='fab fa-facebook-f'></i></a>
                        <a href='#'><i class='fab fa-instagram'></i></a>
                    </div>
                </div>
            </div>
        </div>
       </footer>
       <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm" crossorigin="anonymous"></script>
       <script src="homeauth.js"></script>
    </body>
</html>